{% extends "admin/base.html" %}

{% block title %}ç³»çµ±è¨­å®š{% endblock %}

{% block extra_style %}
<style>
h2 {
    color: #333;
    text-align: center;
    margin-bottom: 30px;
}
.section {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin: 20px 0;
}
.section-title {
    font-size: 1.2em;
    color: #333;
    margin-bottom: 15px;
    border-bottom: 2px solid #007bff;
    padding-bottom: 5px;
}
.form-group {
    margin-bottom: 20px;
}
label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #333;
}
input, select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    box-sizing: border-box;
}
.actions {
    text-align: center;
    margin-top: 30px;
    display: flex;
    gap: 15px;
    justify-content: center;
}
.preview {
    width: 100%;
    height: 200px;
    border-radius: 8px;
    object-fit: cover;
    margin-top: 10px;
}
.current-bg {
    text-align: center;
    margin-bottom: 20px;
}
.message {
    background: #d4edda;
    color: #155724;
    padding: 10px;
    border-radius: 6px;
    margin: 20px 0;
}
.error {
    background: #f8d7da;
    color: #721c24;
    padding: 10px;
    border-radius: 6px;
    margin: 20px 0;
}
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h2>âš™ï¸ ç³»çµ±è¨­å®š</h2>
    
    <div class="section">
        <div class="section-title">ğŸ–¼ï¸ èƒŒæ™¯è¨­å®š</div>
        
        {% if config.background_url %}
        <div class="current-bg">
            <p><strong>ç›®å‰èƒŒæ™¯ï¼š</strong></p>
            <img src="{{ config.background_url }}" class="preview" alt="ç›®å‰èƒŒæ™¯">
        </div>
        {% endif %}
        
        <form method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label>é¸æ“‡æ–°èƒŒæ™¯åœ–ç‰‡</label>
                <input type="file" name="background" accept="image/*">
                <small style="color: #666;">æ”¯æ´ JPGã€PNGã€GIF æ ¼å¼</small>
            </div>
            
            <div class="form-group">
                <label>æˆ–ä½¿ç”¨é è¨­èƒŒæ™¯</label>
                <select name="preset_background">
                    <option value="">-- é¸æ“‡é è¨­èƒŒæ™¯ --</option>
                    <option value="/static/backgrounds/gradient1.jpg">æ¼¸å±¤èƒŒæ™¯ 1</option>
                    <option value="/static/backgrounds/gradient2.jpg">æ¼¸å±¤èƒŒæ™¯ 2</option>
                    <option value="/static/backgrounds/pattern1.jpg">åœ–æ¡ˆèƒŒæ™¯ 1</option>
                    <option value="/static/backgrounds/nature1.jpg">è‡ªç„¶é¢¨æ™¯ 1</option>
                </select>
            </div>
            
            <button type="submit" name="action" value="background" class="btn btn-primary">ğŸ’¾ æ›´æ–°èƒŒæ™¯</button>
        </form>
    </div>

    <div class="section">
        <div class="section-title">ğŸ” ç®¡ç†å“¡å¯†ç¢¼</div>
        <form method="POST">
            <div class="form-group">
                <label>æ–°ç®¡ç†å“¡å¯†ç¢¼</label>
                <input type="password" name="new_password" placeholder="è¼¸å…¥æ–°çš„ç®¡ç†å“¡å¯†ç¢¼">
            </div>
            
            <div class="form-group">
                <label>ç¢ºèªæ–°å¯†ç¢¼</label>
                <input type="password" name="confirm_password" placeholder="å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼">
            </div>
            
            <button type="submit" name="action" value="password" class="btn btn-primary">ğŸ”‘ æ›´æ–°å¯†ç¢¼</button>
        </form>
    </div>

    {% if message %}
    <div class="message">{{ message }}</div>
    {% endif %}

    {% if error %}
    <div class="error">{{ error }}</div>
    {% endif %}

    <div class="actions">
        <a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary">â† è¿”å›ç®¡ç†å°</a>
    </div>
</div>
{% endblock %}
